# KokoroAgeteke! - システム仕様書

## 1. ゲームの基本システム

### 1.1 Kokoro（メンタルゲージ）システム

- **初期値**: 住人（敵）ごとに異なるマイナス値からスタート（例: -20, -30, -50 など）
- **勝利条件**: 指定ターン数内にKokoroゲージを0以上にする
- **敗北条件**: ターン制限内に条件達成できない、またはプレイヤーの手札が尽きる
- **視覚表現**: 折れた心が回復していく視覚効果でわかりやすく表現

### 1.2 ターン制バトル

#### プレイヤーターン
1. ターン開始時、パートナーがバッグから5枚のカード（アイテム）をランダムに提供
2. プレイヤーは手持ちのカードを任意の順番・枚数で使用可能
3. 未使用カードは手元にキープでき、次ターンにも持ち越し可能（手札上限あり）
4. カード効果：回復、デバフ除去、バフ獲得、特殊効果など

#### 住人（敵）ターン
1. 自動的にKokoroゲージにストレス（減少効果）が発生
2. 住人の特性に応じたデバフを付与（例：「落ち込みやすい」「否定的思考」など）
3. 特殊イベント（急なメンタルダウンなど）がランダム発生

### 1.3 バッグ（デッキ）システム

- 初期バッグには基本カード10〜15枚を保有
- バッグ内のカードがすべて引かれると自動的にリセット・リシャッフル
- バトル勝利・ショップでカードを追加・強化・削除可能
- パートナーごとにバッグの初期特性が異なる（例：特定カードタイプの出現率UP）

### 1.4 Domo（通貨）システム

- 獲得方法：
  - バトル勝利：基本報酬 + ターン数ボーナス
  - 大きな回復達成時のボーナス
  - 特殊イベント
  - レリック効果
- 使用用途：
  - ショップでのカード購入
  - カード強化
  - レリック（パッシブアイテム）購入
  - 特殊イベントでの選択肢

## 2. マップと進行システム

### 2.1 マップ構造

```
[スタート] → [通常バトル] → [イベント/ショップ] → [通常バトル] → [中ボス] → [報酬] → [次ステージ]
```

- 各ステージは複数のノードで構成され、ノード間に分岐がある
- ノードタイプ：
  - **通常バトル**: 一般的な住人との遭遇
  - **イベント**: ランダムイベント（良い効果/悪い効果/選択肢）
  - **ショップ**: カード・レリック購入、バッグ調整
  - **休憩所**: バッグ内カードの一部強化、特殊効果
  - **中ボス/ボス**: 高難度バトル
  - **宝箱**: 特別なレリック・稀少カード入手

### 2.2 進行とスケーリング

- **ステージ構成**: 全3〜4ステージ + 最終ボス
- **難易度スケーリング**:
  - ステージごとに住人の初期Kokoroマイナス値が大きくなる
  - 複数のデバフが同時に発生するようになる
  - ターン制限が厳しくなる
  - 特殊なイベント・ギミックが増加

## 3. カード・アイテムシステム

### 3.1 カードタイプ

1. **基本回復カード**
   - 単純な回復効果を持つ基本カード（例：「励まし」+3回復）

2. **特殊回復カード**
   - 条件付き効果や特殊な回復方法（例：「ユーモア」デバフがあると効果2倍）

3. **バフカード**
   - 一定ターン継続する強化効果（例：「自信」3ターン回復効果+1）

4. **デバフ解除カード**
   - 特定または全デバフを解除（例：「傾聴」すべてのデバフを1段階軽減）

5. **特殊効果カード**
   - ゲームルールを変更する効果（例：「共感」相手ターンのストレス減少を1回無効）

### 3.2 レリック（パッシブアイテム）

- 永続的効果を持つアイテム
- バトル勝利、ショップ、特殊イベントで入手
- パートナー強化、カード強化、特殊ボーナスなど様々な効果

### 3.3 カードレアリティ

- **通常**: 基本的な効果を持つ一般カード
- **レア**: 効果が強力または特殊な条件付きカード
- **スーパーレア**: ゲームプレイを大きく変える効果を持つカード

## 4. パートナーシステム

- 各パートナーは固有の特徴とスタート特性を持つ
- パートナー特性例：
  - バッグの初期サイズ変更
  - 特定カードタイプの出現率上昇
  - 特別なスタートレリック
  - 固有のメカニクス/ギミック

## 5. バランス設計

### 5.1 難易度調整

- **ターン制限**: 住人の難易度に応じて10〜20ターン
- **ストレス増加量**: 標準で-1〜-3/ターン（住人により変動）
- **デバフ強度**: 効果の強さと解除難易度のバランス

### 5.2 カード効果バランス

- **回復基本値**:
  - 基本カード: +2〜+5
  - レアカード: +3〜+8 (条件付き)
  - スーパーレア: +5〜+15 (条件付き/リスク付き)

- **コスト設計**: 
  - 効果が強いカードほど使用制限あり（使い切り、ターン制限など）

## 6. 演出とフィードバック

- **ビジュアルフィードバック**:
  - 回復時の派手なエフェクト
  - 住人の表情変化（絶望→希望）
  - ターン終了時の大げさなリアクション

- **サウンドデザイン**:
  - 大回復時の爽快な効果音
  - ストレス増加時の不安感あるサウンド
  - Domo獲得時の明るい効果音

## 7. 周回要素

- バトル達成やクリアで新カード解放
- 新パートナー開放
- 住人図鑑の埋めていく要素
- チャレンジモード解放

---

このシステム仕様書は開発進行に伴い詳細化・調整されます。
